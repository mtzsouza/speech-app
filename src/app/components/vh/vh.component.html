<div class="container">
  <app-navbar></app-navbar>
  <div class="main">
    <div class="video-center">
      <button (click)="goBack()" class="back-button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Back</span>
      </button>

      <div class="header">
        <h1>{{ language.videos.title }}</h1>
      </div>

      <div class="search-bar">
        <div class="search-wrapper">
          <i class="fas fa-search search-icon"></i>
          <input 
            type="text" 
            [placeholder]="language.videos.searchPlaceholder"
            #searchInput 
            (input)="onSearch(searchInput.value)" 
          />
          <i *ngIf="searchInput.value" class="fas fa-times clear-icon" (click)="clearSearch(searchInput)"></i>
        </div>
      </div>

      <!-- English Videos Section -->
      <div class="video-section">
        <h2 class="section-title">{{ language.videos.englishSection }}</h2>
        <div class="video-list">
          <div class="video-item" 
               *ngFor="let video of englishVideos" 
               [ngClass]="{'watched-video': isWatched(video.link)}">
            <div class="video-content">
              <div class="thumbnail">
                <img [src]="video.thumbnail" alt="{{ video.title }}" />
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
                <div *ngIf="isWatched(video.link)" class="watched-badge">
                  <i class="fas fa-check"></i> {{ language.videos.watched }}
                </div>
              </div>
              <div class="video-info">
                <h3 class="video-title">
                  <a *ngIf="video.link; else plainTitle"
                     [href]="video.link"
                     target="_blank"
                     (click)="trackVideoClick(video.link)">
                    {{ video.title.replace('ENG_PK ', '').replace('SPA_PK ', '') }}
                  </a>
                  <ng-template #plainTitle>{{ video.title.replace('ENG_PK ', '').replace('SPA_PK ', '') }}</ng-template>
                </h3>
                <p class="video-description">{{ video.description }}</p>
              </div>
            </div>
            <a *ngIf="video.link"
               [href]="video.link"
               target="_blank"
               class="watch-button"
               (click)="trackVideoClick(video.link)">
              Watch Video <i class="fas fa-external-link-alt"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Spanish Videos Section -->
      <div class="video-section">
        <h2 class="section-title">{{ language.videos.spanishSection }}</h2>
        <div class="video-list">
          <div class="video-item" 
               *ngFor="let video of spanishVideos" 
               [ngClass]="{'watched-video': isWatched(video.link)}">
            <div class="video-content">
              <div class="thumbnail">
                <img [src]="video.thumbnail" alt="{{ video.title }}" />
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
                <div *ngIf="isWatched(video.link)" class="watched-badge">
                  <i class="fas fa-check"></i> {{ language.videos.watched }}
                </div>
              </div>
              <div class="video-info">
                <h3 class="video-title">
                  <a *ngIf="video.link; else plainTitle"
                     [href]="video.link"
                     target="_blank"
                     (click)="trackVideoClick(video.link)">
                    {{ video.title.replace('ENG_PK ', '').replace('SPA_PK ', '') }}
                  </a>
                  <ng-template #plainTitle>{{ video.title.replace('ENG_PK ', '').replace('SPA_PK ', '') }}</ng-template>
                </h3>
                <p class="video-description">{{ video.description }}</p>
              </div>
            </div>
            <a *ngIf="video.link"
               [href]="video.link"
               target="_blank"
               class="watch-button"
               (click)="trackVideoClick(video.link)">
               {{ language.videos.watchButton }} <i class="fas fa-external-link-alt"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
