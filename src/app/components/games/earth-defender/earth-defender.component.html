<div class="container">
    <app-navbar></app-navbar>
    <div class="main">
        <div class="panel">
            <div class="game-container">
                <!--scoreboard-->
                <div class="scoreboard">
                    <div>
                        <p>{{ language.earthDefender.score }} {{ score }}</p>
                        <p>{{ language.earthDefender.streak }} {{ streak }}</p>
                        <p>{{ language.earthDefender.longestStreak }} {{ longestStreak }}</p>
                        <p>{{ language.earthDefender.time }} {{ timer }}</p>
                    </div>

                    <div>
                        <p>{{ language.earthDefender.bestTime }} {{ bestTime }}</p>
                        <p>{{ language.earthDefender.bestScore }} {{ bestScore }}</p>
                        <p>{{ language.earthDefender.bestStreak }} {{ bestStreak }}</p>
                    </div>
                    <button class="exit-btn" routerLink="/games">{{ language.earthDefender.backToGames }}</button>
                </div>

                <!--meteor-->
                <div *ngIf="showMeteor" class="meteor" [ngStyle]="{'top': meteorPosition + '%'}">
                    <img src="/assets/games/earth-defender/meteor.png" alt="Meteor">
                    <span class="word">
                        {{wordParts.before}}<span class="highlight">{{wordParts.highlight}}</span>{{wordParts.after}}
                    </span>
                </div>

                <!--earth-->
                <div *ngIf="showEarth" class="earth">
                    <img src="/assets/games/earth-defender/earth.png" alt="Earth">
                </div>

                <!--options-->
                <div class="options-container">
                    <div class="options">
                        <button *ngFor="let option of options" (click)="selectAnswer(option)" [disabled]="isDisabled">
                            {{ option }}
                        </button>
                    </div>
                </div>

                <!--explosion-->
                <div *ngIf="explosion" class="explosion" [ngStyle]="{'top': explosion.y + 'px', 'left': explosion.x + '%', 'width': explosion.size + 'px', 'height': explosion.size + 'px'}">
                    <img src="/assets/games/earth-defender/explosion.png" alt="Explosion">
                </div>
           

                <!--missile-->
                <div class="missile-container">
                    <div *ngFor="let missile of missiles" class="missile" [ngStyle]="{'bottom': missile.position + 'px'}">
                        <img src="/assets/games/earth-defender/missile.png" alt="Missile">
                    </div>
                </div>

                <!--game over-->
                <div class="menu" *ngIf="gameOver">
                    <div class="menu-content">
                        <h2>{{ language.earthDefender.gameOver }}</h2>
                        <p>{{ getSurvivedTime() }}</p>
                        <button class="restart-btn" (click)="restartGame()">{{ language.earthDefender.restart }}</button>
                    </div>
                </div>

                <!--instructions-->
                <div class="menu" *ngIf="showInstructions">
                    <div class="menu-content">
                        <h2>{{ language.earthDefender.instructions.title }}</h2>
                        <p>{{ language.earthDefender.instructions.goal }}</p>
                        <p>{{ language.earthDefender.instructions.shoot }}</p>
                        <p>{{ language.earthDefender.instructions.effect }}</p>
                        <p>{{ language.earthDefender.instructions.caution }}</p>
                        <p>{{ language.earthDefender.instructions.question }}</p>
                        <label>
                            <input type="checkbox" #dontShow (change)="hideInstructions(dontShow.checked)">
                            {{ language.earthDefender.instructions.dontShowAgain }}
                        </label>
                        <button class="restart-btn" (click)="hideInstructions(dontShow.checked)">{{ language.earthDefender.instructions.startGame }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
