<div class="container">
  <app-navbar></app-navbar>
  <div class="main">
    <div class="achievement-container">
      <a (click)="goBack()" class="back-link">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Back</span>
      </a>

      <div class="header">
        <h1 class="title">Welcome to Progress Sharing!</h1>
      </div>

      <!-- Earned Badges Section -->
      <div class="earned-badges" *ngIf="earnedBadges.length > 0">
        <h2>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 15L8.5 18L9.5 14L6.5 11.5L10.5 11L12 7L13.5 11L17.5 11.5L14.5 14L15.5 18L12 15Z" fill="currentColor" stroke="currentColor"/>
            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
          Earned Badges!
        </h2>
        <div class="badge-grid">
          <div class="badge-card shiny-badge"
              *ngFor="let badge of earnedBadges">
            <div class="badge-icon">{{ badge.icon }}</div>
            <div class="badge-info">
              <h3>{{ badge.name }}</h3>
              <span class="badge-tooltip">Required Progress: {{ badge.requiredProgress }}</span>
            </div>
          </div>
        </div>

        <!-- Show 'See Earned Badges' button ONLY IF at least one badge is earned -->
        <div class="earned-btn-container">
          <button class="progress-btn" (click)="viewEarnedBadges()">
            See Earned Badges
          </button>
        </div>
      </div>

      <!-- Confetti Effect -->
      <div *ngIf="showConfetti">
        <div
          *ngFor="let piece of confettiPieces"
          class="confetti"
          [ngStyle]="{ left: piece.left, backgroundColor: piece.color, animationDuration: piece.animationDuration }"
        ></div>
      </div>

      <!-- Unearned Badges Section -->
      <div class="unearned-badges">
        <h2>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Not Yet Earned!
        </h2>
        <div class="badge-grid">
          <div class="badge-card unearned"
              *ngFor="let badge of unearnedBadges">
            <div class="badge-icon">{{ badge.icon }}</div>
            <div class="badge-info">
              <h3>{{ badge.name }}</h3>
              <span class="badge-tooltip">Required Progress: {{ badge.requiredProgress }}</span>
            </div>
          </div>
        </div>

        <!-- 'See Unearned Badges' button (always appears) -->
        <div class="unearned-btn-container">
          <button class="progress-btn" (click)="viewUnearnedBadges()">
            See Unearned Badges
          </button>
        </div>
      </div>

      <!-- View Progress Data Button (Centered) -->
      <div class="progress-data-link">
        <button class="progress-btn" (click)="navigateToProgress()">View Progress Data</button>
      </div>
    </div>
  </div>
</div>
