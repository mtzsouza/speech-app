<div class="preferences-wrapper">
    <button class="preferences-btn" (click)="toggleDropdown('profile')" [class.active]="dropdowns.profile">
        <img src="assets/profile.svg" alt="Profile Icon" class="profile-icon" />
    </button>

    <div class="dropdown-menu" *ngIf="dropdowns.profile">
        <!-- User Info -->
        <div class="user-info">
            <img src="assets/profile.svg" alt="Profile Icon" class="profile-icon" />
            <p>{{ userLanguage.preferences.greeting }}{{ username || 'Anon' }}</p>
        </div>

        <div class="menu-items">
            <!-- Account Settings -->
            <button class="menu-item" (click)="navigateTo('/update-name')">
                <i class="fas fa-user-edit"></i>
                <span>{{ userLanguage.preferences.updateUsername }}</span>
            </button>
            
            <button class="menu-item" (click)="navigateTo('/change-password')">
                <i class="fas fa-key"></i>
                <span>{{ userLanguage.preferences.changePassword }}</span>
            </button>
            
            <button class="menu-item" (click)="navigateTo('/request-admin')">
                <i class="fas fa-user-shield"></i>
                <span>{{ userLanguage.preferences.requestAdmin }}</span>
            </button>

            <!-- Language Settings -->
            <div class="submenu">
                <button class="menu-item" (click)="toggleDropdown('language')">
                    <i class="fas fa-globe"></i>
                    <span>{{ userLanguage.preferences.language }}</span>
                    <span class="arrow" [class.open]="dropdowns.language">&#9662;</span>
                </button>
                
                <div class="submenu-content" *ngIf="dropdowns.language">
                    <button class="submenu-item" (click)="setLanguage('english')">
                        {{ userLanguage.preferences.english }}
                        <span *ngIf="language === 'english'">✓</span>
                    </button>
                    <button class="submenu-item" (click)="setLanguage('spanish')">
                        {{ userLanguage.preferences.spanish }}
                        <span *ngIf="language === 'spanish'">✓</span>
                    </button>
                    <button class="submenu-item" (click)="setLanguage('default')">
                        {{ userLanguage.preferences.default }}
                        <span *ngIf="language === 'default'">✓</span>
                    </button>
                </div>
            </div>

            <div class="divider"></div>

            <!-- Sign Out Button -->
            <button class="menu-item signout" (click)="accountStatus()">
                <i class="fas fa-sign-out-alt"></i>
                <span>{{ isSignedIn ? userLanguage.preferences.signout : userLanguage.preferences.signin }}</span>
            </button>
        </div>
    </div>
</div>
